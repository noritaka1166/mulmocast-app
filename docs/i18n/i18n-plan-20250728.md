# MulmoCast App i18n実装計画書
**作成日**: 2025-07-28  
**作成者**: Claude Code  
**対象**: 20コンポーネントの国際化実装  
**ブランチ**: i18n-250729

---

## 📋 実装戦略概要

### 🎯 目標
- **完全な国際化**: 100%のコンポーネントでi18n対応
- **品質保証**: 英語・日本語両言語での完全動作
- **段階的実装**: リスクを最小化した優先度ベースの実装

### 📊 現状と目標
| 項目 | 現状 | 目標 | 差分 |
|------|------|------|------|
| i18n対応コンポーネント | 15個 (42.9%) | 35個 (100%) | +20個 |
| 翻訳キー数 | ~170キー | ~205キー | +35キー |
| 未翻訳箇所 | 20コンポーネント | 0個 | -20個 |

---

## 🚀 実装フェーズ計画

### 📅 フェーズ1: 緊急対応 (第1週 - 2日間)
**目標**: 最もユーザーに影響するコンポーネントの国際化

#### 優先度1: 必須コンポーネント
| コンポーネント | 影響度 | 工数 | 理由 |
|---------------|--------|------|------|
| `new_project_dialog.vue` | 🔴 最高 | 30分 | プロジェクト作成の核心機能 |
| `list_view.vue` | 🔴 高 | 15分 | ダッシュボード表示ステータス |
| `grid_view.vue` | 🔴 高 | 15分 | ダッシュボード表示ステータス |
| `header.vue` | 🔴 高 | 45分 | 常時表示のナビゲーション |

**フェーズ1合計工数**: 1時間45分

#### 翻訳キー追加 (フェーズ1)
```typescript
// en.ts & ja.ts に追加するキー
newProject: {
  title: "Create New Project", // "新規プロジェクト作成"
  placeholder: "Enter project title", // "プロジェクトタイトルを入力"
  cancel: "Cancel", // "キャンセル"
  create: "Create", // "作成"
  creating: "Creating...", // "作成中..."
},
status: {
  generating: "Generating", // "生成中"
  loading: "Loading projects...", // "プロジェクト読み込み中..."
},
navigation: {
  home: "Home", // "ホーム"
  dashboard: "Dashboard", // "ダッシュボード"
  settings: "Settings", // "設定"
  appName: "MulmoCast", // "MulmoCast"
},
```

### 📅 フェーズ2: 機能強化 (第2週 - 3日間)
**目標**: 主要機能の完全国際化

#### 優先度2: 機能コンポーネント
| コンポーネント | 影響度 | 工数 | 理由 |
|---------------|--------|------|------|
| `prompt_guide.vue` | 🟡 中 | 90分 | AI支援ガイド（テキスト量多） |
| `beats_viewer.vue` | 🟡 中 | 45分 | ビート表示・操作インターフェース |
| エラーメッセージ (dashboard.vue) | 🟡 中 | 30分 | ユーザーフィードバック |

**フェーズ2合計工数**: 2時間45分

#### 翻訳キー追加 (フェーズ2)
```typescript
// エラー・確認メッセージ
errors: {
  createProjectFailed: "Failed to create project. Please try again.", 
  // "プロジェクトの作成に失敗しました。再試行してください。"
  deleteProjectFailed: "Failed to delete project. Please try again.",
  // "プロジェクトの削除に失敗しました。再試行してください。"
  generateImageFailed: "Failed to generate image",
  // "画像の生成に失敗しました"
  generateAudioFailed: "Failed to generate audio",
  // "音声の生成に失敗しました"
},
confirmations: {
  deleteProject: "Are you sure you want to delete \"{title}\"?",
  // "「{title}」を削除しますか？"
},
prompts: {
  basicPrompt: "Basic Prompt", // "基本プロンプト"
  advancedPrompt: "Advanced Prompt", // "高度なプロンプト"
  examples: "Examples", // "例"
  chatGptTemplate: "Simple ChatGPT Prompt Template", 
  // "シンプルなChatGPTプロンプトテンプレート"
  copyTemplate: "Copy Template", // "テンプレートをコピー"
  proTips: "Pro Tips for Better Results", // "より良い結果のためのプロのコツ"
},
```

### 📅 フェーズ3: パラメーター完成 (第3週 - 2日間)
**目標**: 技術的なパラメーターコンポーネントの国際化

#### 優先度3: パラメーターコンポーネント
| コンポーネント群 | 対象数 | 工数/個 | 総工数 |
|-----------------|--------|---------|--------|
| Parameter components | 10個 | 20分 | 3時間20分 |
| Technical labels | - | - | 30分 |

**フェーズ3合計工数**: 3時間50分

#### 翻訳キー追加 (フェーズ3)
```typescript
// パラメーター関連
parameters: {
  textSlide: "Text Slide Parameters", // "テキストスライドパラメーター"
  cssStyles: "CSS Styles", // "CSSスタイル"
  canvasSize: "Canvas Size Parameters", // "キャンバスサイズパラメーター"
  audioParams: "Audio Parameters", // "音声パラメーター"
  imageParams: "Image Parameters", // "画像パラメーター"
  movieParams: "Movie Parameters", // "動画パラメーター"
  speechParams: "Speech Parameters", // "音声合成パラメーター"
  captionParams: "Caption Parameters", // "字幕パラメーター"
},
```

---

## 🛠️ 実装詳細計画

### ⚠️ 重要：構造リファクタリング計画の統合

**既存の`i18n-structure-refactor-plan.md`の設計を適用**:
- **UI共通語彙**: `ui.common.*`, `ui.actions.*`, `ui.status.*`
- **プレースホルダー方式**: `add`/`addThing`ペア管理
- **構造的整理**: `beat.{type}.{field}`, `parameters.{type}.{field}`

### 1. 翻訳キーファイル更新戦略

#### Step 1: 構造リファクタリングの適用
```typescript
// リファクタリング計画に基づく統一構造
{
  // 1. UI共通語彙（使い回し重視）
  ui: {
    common: {
      title: "Title", image: "Image", audio: "Audio", 
      movie: "Movie", beat: "Beat", slide: "Slide", // ...
    },
    actions: {
      // ペア管理：プレースホルダーなし/あり
      add: "Add",
      addThing: "Add {thing}",
      generate: "Generate", 
      generateThing: "Generate {thing}",
      delete: "Delete",
      deleteThing: "Delete {thing}",
      // ...
    },
    status: {
      loading: "Loading...",
      generating: "Generating...",
      creating: "Creating...",
      // ...
    },
  },
  
  // 2. Beat関連（スキーマベース + UI.common参照）
  beat: {
    textSlide: { titleField: "Title", contentsField: "Contents", /* ... */ },
    imagePrompt: { promptField: "Prompt", /* ... */ },
    // ...
  },
  
  // 3. パラメーター設定（スキーマベース）
  parameters: {
    imageParams: { title: "Image Parameters", provider: "Provider", /* ... */ },
    audioParams: { title: "Audio Parameters", voice: "Voice", /* ... */ },
    // ...
  },
  
  // 4. 新規追加（現在の計画）
  newProject: { /* ... */ },
  errors: { /* ... */ },
  confirmations: { /* ... */ },
}
```

#### Step 2: 段階的キー追加
1. **フェーズ1キー** (10キー) → 即座に追加
2. **フェーズ2キー** (15キー) → フェーズ1完了後に追加
3. **フェーズ3キー** (10キー) → フェーズ2完了後に追加

### 2. コンポーネント実装パターン

#### 標準実装パターン
```vue
<script setup lang="ts">
import { useI18n } from 'vue-i18n'

const { t } = useI18n()
</script>

<template>
  <div>
    <!-- ❌ 変更前: ハードコード -->
    <!-- <h1>Create New Project</h1> -->
    
    <!-- ✅ 変更後: i18n -->
    <h1>{{ t('newProject.title') }}</h1>
    
    <!-- プレースホルダーも国際化 -->
    <input :placeholder="t('newProject.placeholder')" />
    
    <!-- 動的コンテンツの国際化 -->
    <p>{{ t('confirmations.deleteProject', { title: projectTitle }) }}</p>
  </div>
</template>
```

### 3. 品質保証計画

#### テスト戦略
1. **単体テスト**: 各コンポーネントの翻訳キー動作確認
2. **統合テスト**: 言語切り替え時の全体動作確認
3. **視覚確認**: 両言語での表示レイアウト確認
4. **エッジケーステスト**: 長い翻訳テキストでの表示確認

#### レビュープロセス
1. **技術レビュー**: コード品質とパターン統一性
2. **翻訳レビュー**: 日本語翻訳の自然さと正確性
3. **UXレビュー**: ユーザー体験の一貫性
4. **パフォーマンステスト**: i18nバンドルサイズと読み込み速度

---

## ⏰ 実装タイムライン

### 週別計画（構造リファクタリング統合版）
```
Phase 0: 構造リファクタリング (1日間):
└── 月曜: UI共通語彙構築 + 既存構造の整理 (リファクタリング計画適用)

第1週 (2日間):
├── 火曜: フェーズ1キー追加 + new_project_dialog.vue実装
├── 水曜: list_view.vue, grid_view.vue, header.vue実装
└── テスト: フェーズ1機能の言語切り替えテスト

第2週 (3日間):
├── 木曜: フェーズ2キー追加 + prompt_guide.vue実装
├── 金曜: beats_viewer.vue + エラーメッセージ実装
├── 土曜: フェーズ2統合テスト
└── テスト: 主要機能の完全動作確認

第3週 (2日間):
├── 月曜: フェーズ3キー追加 + パラメーターコンポーネント実装 (5個)
├── 火曜: 残りパラメーターコンポーネント実装 (5個)
└── テスト: 全体統合テスト

最終週:
└── 品質保証・ドキュメント更新・完成報告
```

### 日別作業時間（修正版）
- **Phase 0**: 5.5時間（構造リファクタリング）
- **第1週**: 1.75時間/日 × 2日 = 3.5時間
- **第2週**: 0.9時間/日 × 3日 = 2.7時間  
- **第3週**: 1.9時間/日 × 2日 = 3.8時間
- **合計**: 約15.5時間 (構造改善含む)

---

## 🔧 技術実装詳細

### 翻訳キーファイル更新手順

#### 1. en.ts更新
```typescript
// 追加する新しいセクション
export default {
  // ... 既存の構造 ...
  
  // 新規追加セクション
  newProject: {
    title: "Create New Project",
    placeholder: "Enter project title",
    cancel: "Cancel",
    create: "Create", 
    creating: "Creating...",
  },
  
  status: {
    generating: "Generating",
    loading: "Loading projects...",
    generatingImage: "Generating Image...",
  },
  
  // ... 他のセクション ...
}
```

#### 2. ja.ts更新 (対応する日本語)
```typescript
export default {
  // ... 既存の構造 ...
  
  newProject: {
    title: "新規プロジェクト作成",
    placeholder: "プロジェクトタイトルを入力",
    cancel: "キャンセル",
    create: "作成",
    creating: "作成中...",
  },
  
  status: {
    generating: "生成中",
    loading: "プロジェクト読み込み中...",
    generatingImage: "画像生成中...",
  },
  
  // ... 他のセクション ...
}
```

### コンポーネント変更例

#### new_project_dialog.vue の実装例
```vue
<script setup lang="ts">
import { useI18n } from 'vue-i18n'
// ... 他のimport ...

const { t } = useI18n()
// ... 既存のロジック ...
</script>

<template>
  <Dialog>
    <DialogContent>
      <DialogHeader>
        <!-- ❌ 変更前 -->
        <!-- <DialogTitle>Create New Project</DialogTitle> -->
        
        <!-- ✅ 変更後 -->
        <DialogTitle>{{ t('newProject.title') }}</DialogTitle>
      </DialogHeader>
      
      <div>
        <Label for="title">{{ t('project.title') }}</Label>
        <Input 
          id="title" 
          v-model="title"
          :placeholder="t('newProject.placeholder')"
        />
      </div>
      
      <DialogFooter>
        <Button variant="outline" @click="close">
          {{ t('newProject.cancel') }}
        </Button>
        <Button @click="create" :disabled="creating">
          {{ creating ? t('newProject.creating') : t('newProject.create') }}
        </Button>
      </DialogFooter>
    </DialogContent>
  </Dialog>
</template>
```

---

## 🎨 UX考慮事項

### レイアウト調整
- **日本語の文字幅**: 英語より日本語が長くなる場合のレイアウト調整
- **フォント最適化**: 日本語フォントの読みやすさ確保
- **ボタンサイズ**: 翻訳後のテキスト長に応じた適切なサイズ調整

### 翻訳品質基準
- **自然な日本語**: 機械翻訳ではない、自然で読みやすい日本語
- **一貫性**: 用語統一とトーン統一
- **コンテキスト考慮**: UIの文脈に適した翻訳選択

---

## ⚠️ リスク管理

### 潜在的リスク
1. **翻訳品質**: 日本語翻訳の自然さ確保
2. **レイアウト崩れ**: 言語切り替え時のUI表示問題
3. **パフォーマンス**: i18nバンドルサイズ増加
4. **回帰バグ**: 既存機能への影響

### 対策
1. **段階的実装**: フェーズ分けによるリスク分散
2. **継続的テスト**: 各フェーズでの動作確認
3. **バックアップ**: Gitコミットによるロールバック対応
4. **レビュープロセス**: 複数観点での品質確認

---

## 📊 成功指標

### 定量的指標
- **カバレッジ**: 100%のコンポーネントでi18n対応
- **翻訳キー**: 205キー完全対応 (en.ts ↔ ja.ts)
- **エラー率**: 言語切り替え時のエラー0件
- **パフォーマンス**: 読み込み時間増加 < 5%

### 定性的指標
- **ユーザビリティ**: 両言語での直感的な操作
- **一貫性**: 用語とUI表現の統一
- **保守性**: 将来の翻訳追加の容易さ
- **開発効率**: 今後のi18n対応パターン確立

---

## 📝 次ステップ

### 準備作業
1. **Git作業ブランチ確認**: `i18n-250729`で作業継続
2. **開発環境準備**: 言語切り替えテスト環境
3. **レビュー体制**: 日本語翻訳チェック準備

### 実装開始条件
- [x] 詳細計画の承認
- [ ] 開発環境の言語切り替え動作確認
- [ ] バックアップ用Gitコミット完了
- [ ] 翻訳キーファイルの初期更新完了

---

## ⚠️ 重要な修正点

### 構造リファクタリング計画の統合

**既存計画との相違点**:
- **当初計画**: 単純な翻訳キー追加 (10時間)
- **修正計画**: 構造リファクタリング + 翻訳キー追加 (15.5時間)

**追加される重要な要素**:
1. **UI共通語彙の構築** (`ui.common.*`, `ui.actions.*`, `ui.status.*`)
2. **プレースホルダー方式の適用** (`add`/`addThing`ペア管理)
3. **既存構造の整理** (Beat, Parameters等の再編)

**メリット**:
- 長期的な保守性向上
- 翻訳の一貫性確保  
- 新規追加時の効率化
- Ctrl+F検索による使い回し促進

**追加工数**:
- 構造リファクタリング: +5.5時間
- 既存コンポーネントの更新: +追加時間

---

**📌 計画完成**: ユーザー承認待ち

**推定実装期間**: 3-4週間 (約15.5時間の作業時間)
**成果物**: 構造的に最適化された完全国際化MulmoCastアプリケーション